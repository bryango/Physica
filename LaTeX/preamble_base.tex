% Unlimited fonts
	\def\hmmax{0}
	\def\bmmax{0}
% Utils
	\PassOptionsToPackage{hyphens}{url} % before hyperref
	\usepackage{hyperref} % set option with \hypersetup
	\usepackage{uri} % \arxiv
	\usepackage{ccicons} % creative commons
	\usepackage[super]{nth} % nth superscript
	\usepackage[datesep=/]{datetime2} % modify \today
	\usepackage[space]{grffile} % file name fix
	\usepackage{etoolbox,environ,iftex}
	\usepackage{chngcntr}
%	\counterwithout{equation}{section}
	\newcommand{\wiki}[1]{%
		\texttt{Wikipedia:}\,\textit{#1}%
	}
	\newcommand{\wikiref}[2]{\wiki{\href{#1}{#2}}}
	\newcommand{\https}[1]{%
		\href{https://#1}{\nolinkurl{#1}}%
	}
	\newcommand{\http}[1]{%
		\href{http://#1}{\nolinkurl{#1}}%
	}
% Page
	% parskip backup
	\newlength{\parskipbackup}
	\setlength{\parskipbackup}{\parskip}
	% parskip setting
	\setlength{\parskip}{.3\baselineskip}
	% parskip backup
	\newlength{\parskipnorm}
	\setlength{\parskipnorm}{\parskip}
	% baseline
%	\renewcommand{\baselinestretch}{1.05}
	% footnote
	\interfootnotelinepenalty=10000 % forbid footnote spanning pages
% Chinese
	\usepackage[UTF8
		,heading=false
%		,scheme=plain
	]{ctex}
%	\usepackage{indentfirst} % when scheme=plain
	\newcommand{\textkai}[1]{{\kaishu #1}}
	\newcommand{\cjkverb}[1]{%
		\texttt{\xeCJKVerbAddon #1}
	} % CJK verbatim
% Presentation
	\PassOptionsToPackage{%
		table,svgnames,dvipsnames
	}{xcolor}
	\usepackage{xcolor}
	\usepackage{graphicx}
%	\usepackage{wrapfig,subfig}
	\usepackage{svg}
	\usepackage[export]{adjustbox}
	\usepackage[above]{placeins} % \FloatBarrier
	\usepackage{tikz}
%	\usepackage{tikz-cd} % Commutative diagram
%	\usepackage{tkz-euclide} % Euclidaen geometry
	\usetikzlibrary{arrows.meta}
% Code
%	\usepackage{minted}
%	\usemintedstyle{colorful}
% Tables
	\usepackage{booktabs,tabularx,multirow,bigstrut}
%	\usepackage{dcolumn}
	\newcolumntype{C}[1]{>{%
		\hsize=#1\hsize\centering\arraybackslash%
	}X}
	\newcolumntype{W}[1]{>{%
		\hsize=#1\hsize\arraybackslash%
	}X}
	\newcolumntype{^}{>{\rowstyle}}
	\newcommand{\setrowstyle}[1]{%
		\gdef\rowstyle{#1}%
		#1\ignorespaces%
	}
	\newcolumntype{~}{>{\global\let\rowstyle\relax}}
% Math & Fonts
	\let\latexointop\ointop
	\usepackage{mathtools,amssymb,bm % basics
		,physics,siunitx,slashed,tensor % physics
		,simpler-wick,simplewick % wick
		,esint,nicefrac,extarrows % more symbols
		,calligra,romannum,dsfont,fourier-orns % nice fonts
%		,upgreek,textcomp % more fonts
		,eqnarray,resizegather,empheq % more envs
		,relsize,stackengine % utils
	}
%	\usepackage{wasysym}
%	\usepackage{amsthm}
	\usepackage[g]{esvect}
%	\usepackage[mathscr]{eucal}
	\usepackage[scr=esstix]{mathalfa}
	\usepackage[only,sslash]{stmaryrd}
	% math display
	\let\id\indices
	\newcommand*\nicebox[1]{%
		\fbox{\hspace{1em}\addstackgap[5pt]{#1}\hspace{1em}}%
	}
	\empheqset{box=\nicebox}
	\mathtoolsset{showonlyrefs,showmanualtags}
	\resizegathersetup{equations=false}
	\numberwithin{equation}{section}
%	\counterwithout{equation}{section}
	\allowdisplaybreaks[2]
	\sisetup{%
		redefine-symbols=false
		,separate-uncertainty=true
		,range-phrase=\,\textasciitilde\,
		,arc-separator=\,
	}
% Tweaks
	% math line spacing
	\newlength{\djot}
	\setlength{\djot}{\jot}
	\newcommand{\restorejot}{\setlength{\jot}{\djot}}
	% legacy \oint
	\let\ointop\undefined
	\let\ointop\latexointop
	% calligra
	\DeclareMathAlphabet{\mathcalligra}{T1}{calligra}{m}{n}
	\DeclareFontShape{T1}{calligra}{m}{n}{<->s*[2.2]callig15}{}
	% cosmetics
	\newcommand\inlineeqno{\stepcounter{equation}\ (\theequation)}
	\newcommand\scalemath[2]{\scalebox{#1}{\mbox{\ensuremath{\displaystyle #2}}}}
	\newcommand\raisemath[2]{\raisebox{#1\depth}{${#2}$}}
% Commands
	% brackets
	\DeclarePairedDelimiter\aqty{\langle}{\rangle}
	\DeclarePairedDelimiterX\inprod[2]{\langle}{\rangle}{#1,#2}
	\let\ave\aqty
	% extras
	\newcommand{\scriptr}{\mathcalligra{r}\,}
	\newcommand{\rvector}{\pmb{\mathcalligra{r}}\,}
	\newcommand{\propsim}{\mathbin{\ensurestackMath{
		\stackunder[2pt]{\propto}{\sim}
	}}}
	\newcommand{\simprop}{\mathbin{\ensurestackMath{
		\tilde{\propto}
	}}}
	\newcommand{\perc}[1]{\SI{#1}{\percent}}
	\newcommand{\longtwoheadrightarrow}{\mathrel{
		\begin{tikzpicture}
		\path [draw,-{
			>[length=.5ex,width=1.2ex]
			>[length=.5ex,width=1.2ex]}]%
				(0,0) -- (.6,0);
		\end{tikzpicture}
	}}
	\newcommand{\texstringonly}[1]{%
		\texorpdfstring{#1}{}%
	}
% Hacks
	% physics.sty <texmf-dist/tex/latex/physics/>
	% USER: more spacing around Dirac's middle vert
	\let\latexmiddle\middle
	\renewcommand{\middle}[1]{%
		\mspace{.8mu}\latexmiddle#1\mspace{.8mu}
	}
